<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Berlin/Chile <3</title>
  <style>

    @font-face {
        font-family: HK;
        src: url(HK.otf);
    }

    @font-face {
        font-family: NM;
        src: url(NeueBrucke.ttf);
    }

    * {
      margin: 0;
      padding: 0%;
    }

    .bg {
      position: absolute;
      width: 20vw;
      height: 100vh;
      z-index: -10;
      background-color: rgba(0, 0, 255, 0.396);
      filter: blur(15vw) drop-shadow(5vw 5vw 30vw #0000004c);
    }

    body {
      font-family: Arial, sans-serif;
      background-color: #fffaf2;
      margin: 0;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      height: 100%;
      flex-direction: column;
    }

    .container {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      width: 100vw;
      height: 100%;
    }
    
    .card {
      padding: 0;
      width: 100%;
      text-align: center;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      width: 100vw;
      height: 80vh
    }

    #berlin-card {
      border-left: #000 1px solid;
    }


    .clock {
      display: flex;
      justify-content: center;
      align-items: center;
      border-radius: 100%;
      padding: 7vw 5vw;
      width: 30vw;
      border: 1px #000 dotted;
      margin: 4vw 0 0 0;
    }

    .time {
      padding: 0;
      margin: 0;
      border-radius: 200px;
      text-align: center;
      font-size: 5vw;
      border: 1px #000 dotted;
      width: 100%;
      
    }

    h2 {
      border-bottom: #000 1px solid;
      width: 100%;
      height: 10vh;
      font-family: NM;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .spacer {
      margin-top: 1rem;
      height: 1rem;
      border-bottom: #000 1px solid;
      border-top: #000 1px solid;
      width: 100%;
    }

    .weather {
      border-top: #000 1px solid;
      font-size: 1.2em;
      padding: 5vw 0 1vw 0;
      width: 100%;
      margin: 1rem;
    }

    .icon-wrapper {
      border-bottom: #000 1px solid;
      border-top: #000 1px solid;
      width: 100%;
    }

    .icon {
      filter: drop-shadow(0 0 10vw rgba(0, 0, 255, 0.396));
    } 

    .temp {
      font-size: 2.5em;
      font-weight: bold;
      margin: 5px 0;
    }
  </style>
</head>
<body>
  <div class="bg"></div>
        <div class="container">
            <div class="card" id="santiago-card">
                <h2>santiago de chile</h2>
                <div class="clock" >
                  <div class="time" id="time-santiago">
                    --:--
                  </div>
                </div>
                <div class="spacer"></div>
                <div class="weather" id="weather-santiago">Loading weather...</div>
                <div class="icon-wrapper">
                  <img id="icon-santiago" class="icon" alt="" />
                </div>
                <div class="temp" id="temp-santiago"></div>
            </div>
            <div class="card" id="berlin-card">
                <h2>berlin</h2>
                <div class="clock" >
                  <div class="time" id="time-berlin">--:--</div>
                </div>
                <div class="spacer"></div>
                <div class="weather" id="weather-berlin">Loading weather...</div>
                <div class="icon-wrapper">
                  <img id="icon-berlin" class="icon" alt="" />
                </div>
                <div class="temp" id="temp-berlin"></div>
            </div>
        </div>

  <script>

    const API_KEY = 'b5615f1a20df2c37589d6b31e3358cfd';

    const CITY_IDS = {
      santiago: 3874787,
      berlin: 2950159
    };

    async function fetchWeather(cityId) {
      const url = `https://api.openweathermap.org/data/2.5/weather?id=${cityId}&units=metric&appid=${API_KEY}`;
      const response = await fetch(url);
      if (!response.ok) throw new Error('Failed to fetch weather data');
      return response.json();
    }

    function updateTime() {
    const now = new Date();
    const berlinOpts = {
    hour:   '2-digit',
    minute: '2-digit',
    hour12: false,
    timeZone: 'Europe/Berlin'
    };
    const santiagoOpts = {
    hour:   '2-digit',
    minute: '2-digit',
    hour12: false,
    timeZone: 'America/Santiago'
  };

  document.getElementById('time-berlin')
    .textContent = now.toLocaleTimeString('en-GB', berlinOpts);
  document.getElementById('time-santiago')
    .textContent = now.toLocaleTimeString('en-GB', santiagoOpts);
}

    async function updateWeather() {
      try {
        const santiagoData = await fetchWeather(CITY_IDS.santiago);
        const iconCodeS = santiagoData.weather[0].icon;
        document.getElementById('icon-santiago').src =
      `https://openweathermap.org/img/wn/${iconCodeS}@2x.png`;
        document.getElementById('weather-santiago').textContent = santiagoData.weather[0].description;
        document.getElementById('temp-santiago').textContent = Math.round(santiagoData.main.temp) + '°C';

        const berlinData = await fetchWeather(CITY_IDS.berlin);
    const iconCodeB = berlinData.weather[0].icon;
    document.getElementById('icon-berlin').src =
      `https://openweathermap.org/img/wn/${iconCodeB}@2x.png`;
        document.getElementById('weather-berlin').textContent = berlinData.weather[0].description;
        document.getElementById('temp-berlin').textContent = Math.round(berlinData.main.temp) + '°C';
      } catch (error) {
        console.error(error);
      }
    }

   


    updateTime();
    setInterval(updateTime, 1000);      
    updateWeather();
    setInterval(updateWeather, 600000);    
  </script>
</body>
</html>
